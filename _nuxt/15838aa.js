(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{324:function(t,e,n){var content=n(328);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(47).default)("12b783a6",content,!0,{sourceMap:!1})},325:function(t,e,n){"use strict";n.r(e);var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"media-body"},[e("img",{attrs:{src:n(124),alt:"Dygoo",width:"100"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn dropdown-toggle py-0",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"uil uil-ellipsis-h"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"font-size-16 mb-3"},[e("i",{staticClass:"uil uil-users-alt mr-1"}),this._v(" Room")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"font-size-16 mb-3"},[e("i",{staticClass:"uil uil-user mr-1"}),this._v(" Online")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-muted text-truncate mb-0"},[e("i",{staticClass:"uil uil-users-alt mr-1"}),this._v(" 1 Members Online")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"chat-day-title"},[e("div",{staticClass:"title"},[this._v("Start chat with Dygoo")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-auto"},[e("button",{staticClass:"btn btn-primary chat-send w-md waves-effect waves-light",attrs:{type:"submit"}},[e("span",{staticClass:"d-none d-sm-inline-block mr-2"},[this._v("Send")]),this._v(" "),e("i",{staticClass:"mdi mdi-send float-right"})])])}],o=(n(29),n(2)),c=(n(30),n(31),n(1)),l=n(326);[n.n(l).a].forEach((function(t){return c.a.use(t)}));var d={mounted:function(){this.nuxtSocketRegister()},data:function(){return{authData:{username:"",room:""},messages:[],newMessage:{text:""},onlineUsers:[],socket:this.$nuxtSocket({})}},methods:{logout:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("logout");case 2:t.redirectToLogin();case 3:case"end":return e.stop()}}),e)})))()},nuxtSocketRegister:function(){var t=this,e=this.$store.state.authUser,n=e.username,r=e.room;this.authData.username=n,this.authData.room=r,this.socket.emit("joinRoom",{username:n,room:r}),this.socket.on("roomUsers",(function(e){e.room;var n=e.users;t.outputUsers(n)})),this.socket.on("message",(function(e){t.outputMessage(e)}))},outputUsers:function(t){this.onlineUsers=[];for(var e=0;e<t.length;e++)this.onlineUsers.push(t[e].username)},outputMessage:function(t){t.username===this.authData.username?t.sender=!0:t.sender=!1,this.messages.push(t)},sendNewMessage:function(){var t=this.newMessage.text;this.newMessage.text="",this.socket.emit("chatMessage",t)},redirectToLogin:function(){this.$router.push("login")}}},v=(n(327),n(21)),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-lg-flex mb-4"},[n("div",{staticClass:"chat-leftsidebar card"},[n("div",{staticClass:"p-3 px-4"},[n("div",{staticClass:"media"},[t._m(0),t._v(" "),n("div",{staticClass:"dropdown chat-noti-dropdown"},[t._m(1),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right"},[n("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:t.logout}},[t._v("Leave Room")])])])])]),t._v(" "),n("div",{staticClass:"pb-3"},[n("div",{staticStyle:{"max-height":"470px"}},[n("div",{staticClass:"p-4 border-top"},[n("div",[t._m(2),t._v(" "),n("ul",{staticClass:"list-unstyled chat-list group-list"},[n("li",{staticClass:"active"},[n("a",{attrs:{href:"javascript:void(0)"}},[n("div",{staticClass:"media align-items-center"},[n("div",{staticClass:"avatar-xs mr-3"},[n("span",{staticClass:"avatar-title rounded-circle bg-soft-primary text-primary"},[t._v("\n                                                "+t._s(t.authData.room.slice(0,2).toUpperCase())+"\n                                            ")])]),t._v(" "),n("div",{staticClass:"media-body"},[n("h5",{staticClass:"font-size-14 mb-0"},[t._v(t._s(t.authData.room))])])])])])])])]),t._v(" "),n("div",{staticClass:"p-4 border-top"},[n("div",[t._m(3),t._v(" "),n("ul",{staticClass:"list-unstyled chat-list"},t._l(t.onlineUsers,(function(e){return n("li",[n("a",{attrs:{href:"javascript:void(0)"}},[n("div",{staticClass:"media align-items-center"},[n("div",{staticClass:"avatar-xs mr-3"},[n("span",{staticClass:"avatar-title rounded-circle bg-soft-primary text-primary"},[t._v("\n                                                "+t._s(e.slice(0,1).toUpperCase())+"\n                                            ")])]),t._v(" "),n("div",{staticClass:"media-body overflow-hidden"},[n("h5",{staticClass:"text-truncate font-size-14 mb-1"},[t._v(t._s(e))])])])])])})),0)])])])])]),t._v(" "),n("div",{staticClass:"w-100 user-chat mt-4 mt-sm-0 ml-lg-1"},[n("div",{staticClass:"card"},[n("div",{staticClass:"p-3 px-lg-4 border-bottom"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4 col-6"},[n("h5",{staticClass:"font-size-16 mb-1 text-truncate"},[n("a",{staticClass:"text-dark",attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.authData.room))])]),t._v(" "),t._m(4)])])]),t._v(" "),n("div",{staticClass:"px-lg-2"},[n("div",{staticClass:"chat-conversation p-3 custom-m-h"},[n("ul",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"list-unstyled mb-0 chat-overflow"},[t._m(5),t._v(" "),t._l(t.messages,(function(e){return n("li",{class:{right:e.sender}},[n("div",{staticClass:"conversation-list"},[n("div",{staticClass:"ctext-wrap"},[n("div",{staticClass:"ctext-wrap-content"},[n("h5",{staticClass:"font-size-14 conversation-name"},[n("a",{staticClass:"text-dark",attrs:{href:"javascript:void(0)"}},[t._v(t._s(e.username))]),t._v(" "),n("span",{staticClass:"d-inline-block font-size-12 text-muted ml-2"},[t._v(t._s(e.time))])]),t._v(" "),n("p",{staticClass:"mb-0"},[t._v("\n                                            "+t._s(e.text)+"\n                                        ")])])])])])}))],2)])]),t._v(" "),n("div",{staticClass:"p-3 chat-input-section"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.sendNewMessage(e)}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"position-relative"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage.text,expression:"newMessage.text"}],staticClass:"form-control chat-input rounded",attrs:{type:"text",placeholder:"Enter Message..."},domProps:{value:t.newMessage.text},on:{input:function(e){e.target.composing||t.$set(t.newMessage,"text",e.target.value)}}})])]),t._v(" "),t._m(6)])])])])])])}),r,!1,null,"53d17507",null);e.default=component.exports},326:function(t,e,n){t.exports=function(){"use strict";var t=function(t,e){"function"==typeof t.scroll?t.scroll({top:t.scrollHeight,behavior:e?"smooth":"instant"}):t.scrollTop=t.scrollHeight},e={bind:function(e,n){var r=!1;e.addEventListener("scroll",(function(t){(r=e.scrollTop+e.clientHeight+1<e.scrollHeight)&&0===e.scrollTop&&e.dispatchEvent(new Event("v-chat-scroll-top-reached"))})),new MutationObserver((function(o){var c=n.value||{};if(!1!==c.enabled){var l=!1===c.always&&r,d=o[o.length-1].addedNodes.length,v=o[o.length-1].removedNodes.length;if(c.scrollonremoved){if(l||1!=d&&1!=v)return}else if(l||1!=d)return;var h=c.smooth;!d&&1===v&&c.scrollonremoved&&"smoothonremoved"in c&&(h=c.smoothonremoved),t(e,h)}})).observe(e,{childList:!0,subtree:!0})},inserted:function(e,n){var r=n.value||{};t(e,!r.notSmoothOnInit&&r.smooth)}},n={install:function(t,n){t.directive("chat-scroll",e)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(n),n}()},327:function(t,e,n){"use strict";var r=n(324);n.n(r).a},328:function(t,e,n){(e=n(46)(!1)).push([t.i,"body[data-layout=horizontal] .page-content[data-v-53d17507]{margin-top:0!important}.simplebar-content-wrapper[data-v-53d17507]{overflow:auto}.chat-overflow[data-v-53d17507]{height:300px;overflow:auto}.chat-overflow[data-v-53d17507]::-webkit-scrollbar{width:5px;min-height:20px}.chat-overflow[data-v-53d17507]::-webkit-scrollbar-track{border-radius:10px}.chat-overflow[data-v-53d17507]::-webkit-scrollbar-thumb{border-radius:10px;background-color:#5b73e8}",""]),t.exports=e},329:function(t,e,n){"use strict";n.r(e);n(16),n(69);var r={middleware:"authenticated",asyncData:function(){return new Promise((function(t){setTimeout((function(){t()}),1e3)}))},components:{Chat:n(325).default}},o=n(21),component=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Chat")],1)}),[],!1,null,"5f0f8720",null);e.default=component.exports;installComponents(component,{Chat:n(325).default})}}]);